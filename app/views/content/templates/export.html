{% extends 'layout.html' %}

{% block pageTitle %}
    Send your responses
{% endblock %}

{% block beforeContent %}

    {{ govukBackLink ({
        text: 'Back',
        href: 'javascript:history.back()'
    }) }}

{% endblock %}

{% block content %}

<div class="govuk-grid-row">

        <div class="govuk-grid-column-two-thirds">

            <form method="post">

                <h1 class="govuk-heading-xl">Send your responses</h1>

                <p>
                    Copy the code below into an email and send it to the researcher.
                </p>
<button class="govuk-button" onclick="myFunction()">Copy text</button>
                {{ govukTextarea ({
                    id: 'export-json',
                    name: 'export-json',
                    value: data['export-json'],
                    label: {
                        text: 'Responses'
                    }
                }) }}

                <p>
                  {{ govukBackLink ({
                      text: 'Go Back',
                      href: 'javascript:history.back()'
                  }) }}
                </p>

            </form>

        </div>

</div>

<script>
  function myFunction() {
  /* Get the text field */
  var copyText = document.getElementById("export-json");

  /* Select the text field */
  copyText.select();
  copyText.setSelectionRange(0, 99999); /* For mobile devices */

   /* Copy the text inside the text field */
  navigator.clipboard.writeText(copyText.value);


} </script>
{% endblock %}

{% block pageScripts %}

<script>

function selectAllTextInTextArea() {
    $('textarea#export-json').select();
}
$('textarea#export-json').select();

$('textarea#export-json').on('click', selectAllTextInTextArea)

</script>

{% endblock %}
